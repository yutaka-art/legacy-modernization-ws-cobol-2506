# COBOL レガシーアプリケーション モダナイゼーション ワークショップ

このリポジトリは、レガシー COBOL アプリケーションの分析とモダナイゼーション（近代化）を学ぶためのワークショップ教材を含みます。ワークショップでは、既存の COBOL アプリケーションを理解し、モダナイゼーションを計画するプロセスを段階的に体験します。

*注意*
*現時点では、以下の手順は COBOL アプリケーションでは正しく動作しません。COBOL アプリケーションを動作させるように修正してみるのも面白いかもしれません。*

## ワークショップ概要

このワークショップは、レガシー COBOL アプリケーションのドキュメントが失われたという現実的なシナリオを想定しています。参加者はアプリケーションを分析し、理解し、モダナイゼーションのアプローチを計画します。ワークショップは一連のタスクで構成されています。

## 前提条件

- [Visual Studio Code](https://code.visualstudio.com/)
- [Docker](https://www.docker.com/)
- [Dev Containers 拡張機能](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)
- [GitHub CLI](https://cli.github.com/)（オプション、ワークショップ課題の操作用）

## はじめに

1. このリポジトリを自分の GitHub アカウントにフォークします:
   - リポジトリページ右上の「Fork」ボタンをクリック
   - フォーク作成プロセスを完了

2. フォークしたリポジトリをクローンします:
   ```bash
   git clone https://github.com/your-username/legacy-modernization-ws-cobol.git
   cd legacy-modernization-ws-cobol
   ```

3. Visual Studio Code でプロジェクトを開きます:
   ```bash
   code .
   ```

4. VS Code で「Reopen in Container」と表示されたらクリックします。
   - または `F1` を押して「Dev Containers: Reopen in Container」と入力し、Enter

5. Dev Container のビルドと起動が完了するまで待ちます（初回は数分かかります）。

## ワークショップ構成

ワークショップは複数のセクションに分かれており、それぞれに学習目標があります。

### 0. リポジトリセットアップ
- リポジトリのフォークとクローン
- VS Code Dev Containers を使った開発環境のセットアップ

### 1. 初期分析
- ワークショップ構成と目的の分析
- プロジェクト構成の調査
- 使用技術の特定
- アプリケーション分析の開始

### 2. アプリケーション探索
- アプリケーションの処理フローの理解
- 各モジュールの役割と機能の調査
- アプリケーションアーキテクチャの分析

### 3. サブルーチン調査
- 各モジュールのサブルーチンの特定
- モジュール間の関係性の理解
- 依存関係のマッピング

### 4. 設計ドキュメント作成
- 設計ドキュメントのテンプレート作成
- 既存アプリケーションアーキテクチャのドキュメント化
- 構造を可視化するための図（mermaid記法含む）の利用

### 5. モダナイゼーション計画
- モダナイゼーションに適した技術の調査
- 代替モダナイゼーションアプローチの検討
- モダナイズ後のアーキテクチャ概要設計

## アプリケーションのビルドと実行

Dev Container 内で VS Code のタスクを使ってアプリケーションをビルド・実行できます。

### VS Code コマンドパレット（Ctrl+Shift+P または Cmd+Shift+P）を使用:
1. アプリケーションのビルド:
   - コマンドパレットで「Tasks: Run Build Task」と入力、または `Ctrl+Shift+B` を押す

2. アプリケーションの実行:
   - コマンドパレットを開く
   - 「Tasks: Run Task」と入力
   - 「run」を選択

### VS Code のターミナルを使用:
1. アプリケーションのビルド:
   ```bash
   make
   ```

2. アプリケーションの実行:
   ```bash
   make run
   ```

3. ビルド成果物のクリーン:
   ```bash
   make clean
   ```

## ワークショップ課題の操作

このワークショップは「workshop」ラベル付きの GitHub Issue を中心に進行します。各 Issue がワークショップのタスクやマイルストーンを表します。以下のコマンドで課題を確認できます。

```bash
gh issue list --label workshop
```

特定の Issue の詳細を確認するには:

```bash
gh issue view ISSUE_NUMBER
```

## レガシーアプリケーション概要

このリポジトリには、参加者が発見・分析していくレガシー COBOL アプリケーションが含まれています。ソースコードやプログラム構造を調査することで、アプリケーションの目的や機能を段階的に理解できます。

### アプリケーションの目的

このアプリケーションは教育機関向けの**シラバス管理システム**です。ユーザーは講義シラバスの作成・更新・検索・一覧表示・レポート出力が可能です。各講義について以下の詳細情報を管理します。

- 基本情報（講義ID、名称、所属学科、担当教員、開講学期、単位数）
- 講義概要・学習目標
- 週ごとの講義計画（15週分）
- 学科・教員との関連情報

### アプリケーション構成

システムは複数の COBOL プログラムで構成されています。

- **SYLABUS**: メニュー画面を提供するメインプログラム
- **SYLREG**: シラバス登録モジュール
- **SYLUPD**: シラバス更新モジュール
- **SYLDEL**: シラバス削除モジュール
- **SYLQRY**: シラバス検索モジュール
- **SYLLST**: シラバス一覧表示モジュール
- **SYLRPT**: レポート出力モジュール
- **SYLCOM**: 他プログラムで共通利用されるルーチンモジュール

### データファイル

アプリケーションはインデックス付きファイルをデータ保存に利用します。
- `syllabus.dat`: すべてのシラバスレコードを格納するメインデータファイル
- `syllabus_report.txt`: レポート出力用ファイル

### 技術的特徴

このアプリケーションはレガシー COBOL システムに共通する技術的特徴を備えています。
- メニュー駆動型のターミナルUI
- インデックス付きファイル操作（VSAM風）
- フォーム入力用のScreen Section
- 複数プログラムモジュール間の呼び出し
- レポート出力
- データ検証ルーチン
- ファイルI/Oエラー処理

このシステムは、教育機関の管理系業務でよく見られる典型的な業務アプリケーションの一例であり、モダナイゼーション演習に最適です。

ワークショップを通じて、エンタープライズ環境でよく見られるレガシーシステムのモダナイゼーション手法を現実的に学ぶことができます。

## ライセンス

[MITライセンス](https://gist.githubusercontent.com/shinyay/56e54ee4c0e22db8211e05e70a63247e/raw/f3ac65a05ed8c8ea70b653875ccac0c6dbc10ba1/LICENSE) のもとで公開

## 作者

- github: <https://github.com/shinyay>
- twitter: <https://twitter.com/yanashin18618>
- mastodon: <https://mastodon.social/@yanashin>
